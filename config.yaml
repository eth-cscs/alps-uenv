clusters:
  balfrin:
    targets:
      -
        uarch: 'a100'
        partition: 'normal'
        variables:
          F7T_URL: 'https://api.cscs.ch/mch/firecrest/v1'
      -
        uarch: 'zen3'
        partition: 'postproc'
        variables:
          F7T_URL: 'https://api.cscs.ch/mch/firecrest/v1'
    runner: f7t
  bristen:
    targets:
      -
        uarch: 'a100'
        partition: 'normal'
        variables:
          F7T_URL: 'https://api.cscs.ch/ml/firecrest/v1'
          SLURM_ACCOUNT: ''
    runner: f7t
  daint:
    targets:
      -
        uarch: 'gh200'
        partition: 'normal'
        variables:
          F7T_URL: "https://api.cscs.ch/hpc/firecrest/v1"
    runner: f7t
  eiger:
    targets:
      -
        uarch: 'zen2'
        partition: 'normal'
        variables:
          SLURM_CONSTRAINT: 'mc'
    runner: f7t
  pilatus:
    targets:
      -
        uarch: 'zen2'
        partition: 'normal'
        variables:
          SLURM_CONSTRAINT: 'mc'
          F7T_URL: 'https://firecrest-dev.cscs.ch'
    runner: f7t
  santis:
    targets:
      -
        uarch: 'gh200'
        partition: 'normal'
    runner:
      slurm-tag:  santis-spack-stack-builder
      baremetal-tag: santis-login-baremetal
  todi:
    targets:
      -
        uarch: 'gh200'
        partition: 'normal'
        variables:
          SLURM_RESERVATION: 'icon'
          F7T_URL: "https://api.cscs.ch/hpc/firecrest/v1"
    runner: f7t
uenvs:
  arbor:
    "v0.9":
      recipes:
        zen2: v0.9/mc
        gh200: v0.9/gh200
      deploy:
        eiger: [zen2]
        todi: [gh200]
  climana:
    "24.7":
      recipes:
        zen2: mch/climana/24.7
        zen3: mch/climana/24.7
        a100: mch/climana/24.7
      deploy:
        balfrin: [zen3, a100]
      develop: False
  climana:
    "24.10":
      recipes:
        zen2: mch/climana/24.10
        zen3: mch/climana/24.10
        a100: mch/climana/24.10
      deploy:
        balfrin: [zen3, a100]
      develop: False
  editors:
    "24.7":
      recipes:
        zen2: "24.7"
        zen3: "24.7"
        gh200: "24.7"
      deploy:
        eiger: [zen2]
        todi: [gh200]
      mount: "/user-tools"
  gromacs:
    "2023":
      recipes:
        # zen2 and zen3 targets use the same recipe
        zen2: 2023/mc
        zen3: 2023/mc
        a100: 2023/a100
        gh200: 2023/gh200-mpi
      deploy:
        # deploy to both the production and test clusters
        eiger: [zen2]
      develop: False
    "2024":
      recipes:
        gh200: 2024/gh200-mpi
      deploy:
        # deploy to both the production and test clusters
        santis: [gh200]
        daint: [gh200]
  cp2k:
    "2024.1":
      recipes:
        gh200: 2024.1/gh200
        zen2: 2024.1/mc
      deploy:
        todi: [gh200]
        eiger: [zen2]
      develop: False
    "2024.2":
      recipes:
        gh200: 2024.2/gh200
        zen2: 2024.2/mc
    "2024.3":
      recipes:
        gh200: 2024.3/gh200
        zen2: 2024.3/mc
      deploy:
        daint: [gh200]
        todi: [gh200]
        eiger: [zen2]
      develop: False
  icon-wcp:
    "v1":
      recipes:
        a100:  wcp/icon/v1/a100
        gh200: wcp/icon/v1/gh200
      deploy:
        todi: [gh200]
        santis: [gh200]
      develop: False
  julia:
    "24.9":
      recipes:
        zen2:  "24.9/mc"
        zen3:  "24.9/mc"
        gh200: "24.9/gh200"
      develop: False
  lammps:
    "2023":
      recipes:
        zen2: "2023/mc"
        zen3: "2023/mc"
      deploy:
        eiger: [zen2]
      develop: False
    "2024":
      recipes:
        gh200: "2024/gh200"
      deploy:
        daint: [gh200]
        todi: [gh200]
        santis: [gh200]
      develop: False
  linalg:
    "24.11":
      recipes:
        zen2: "24.11/mc"
        zen3: "24.11/mc"
        gh200: "24.11/gh200"
      deploy:
        daint: [gh200]
        eiger: [zen2]
        todi: [gh200]
      develop: False
  linalg-complex:
    "24.11":
      recipes:
        zen2: "24.11/mc"
        zen3: "24.11/mc"
        gh200: "24.11/gh200"
      deploy:
        daint: [gh200]
        eiger: [zen2]
        todi: [gh200]
      develop: False
  linaro-forge:
    "24.1":
      recipes:
        zen2: "24.1"
        gh200: "24.1"
      deploy:
        eiger: [zen2]
        santis: [gh200]
        daint: [gh200]
        todi: [gh200]
      develop: False
      mount: "/user-tools"
    "24.0.2":
      recipes:
        zen2: "24.0.2"
        gh200: "24.0.2"
      deploy:
        eiger: [zen2]
        santis: [gh200]
        daint: [gh200]
        todi: [gh200]
      develop: False
      mount: "/user-tools"
  mch:
    "v7":
      recipes:
        a100: v7
      deploy:
        balfrin: [a100]
      develop: False
  namd:
    "3.0":
      recipes:
        gh200: 3.0/gh200
      deploy:
        daint: [gh200]
        todi: [gh200]
      develop: False
  netcdf-tools:
    "2024":
      recipes:
        zen2: '2024/x86'
        zen3: '2024/x86'
        a100: '2024/x86'
        gh200: '2024/arm64'
      deploy:
        eiger: [zen2]
        pilatus: [zen2]
        balfrin: [zen3]
        todi: [gh200]
      develop: False
  # OpenFOAM Foundation
  openfoam-org:
    "8":
      recipes:
        zen2: 8/mc
      deploy:
        eiger: [zen2]
  prgenv-gnu:
    "24.2":
      recipes:
        gh200: 24.2/gh200
      deploy:
        santis: [gh200]
        todi: [gh200]
    "24.7":
      recipes:
        # zen2 and zen3 targets use the same recipe
        zen2: 24.7/mc
        zen3: 24.7/mc
        gh200: 24.7/gh200
      deploy:
        daint: [gh200]
        eiger: [zen2]
        todi: [gh200]
    "24.11":
      recipes:
        # zen2 and zen3 targets use the same recipe
        zen2: 24.11/mc
        zen3: 24.11/mc
        gh200: 24.11/gh200
        a100: 24.11/a100
      deploy:
        daint: [gh200]
        eiger: [zen2]
        todi: [gh200]
        bristen: [a100]
      develop: True
  prgenv-nvfortran:
    "24.11":
      recipes:
        gh200: 24.11/gh200
      deploy:
        todi: [gh200]
  quantumespresso:
    "v7.1":
      recipes:
        # zen2 and zen3 targets use the same recipe
        zen2: v7.1/mc
        zen3: v7.1/mc
        a100: v7.1/a100
      deploy:
        eiger: [zen2]
    "v7.3.1":
      recipes:
        gh200: v7.3.1/gh200
        zen2: v7.3.1/mc
      deploy:
        santis: [gh200]
        todi: [gh200]
        daint: [gh200]
        eiger: [zen2]
  sirius:
    "v7.5":
      recipes:
        a100: v7.5/a100
      develop: True
  vasp:
    "v6.4.2":
      recipes:
        gh200: v6.4.2/gh200
      deploy:
        todi: [gh200]
      develop: False
    "v6.4.3":
      recipes:
        gh200: v6.4.3/gh200
      deploy:
        todi: [gh200]
        daint: [gh200]
      develop: False
